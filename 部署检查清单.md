# Render éƒ¨ç½²æ£€æŸ¥æ¸…å•

åœ¨å¼€å§‹éƒ¨ç½²ä¹‹å‰ï¼Œè¯·ç¡®ä¿å®Œæˆä»¥ä¸‹æ‰€æœ‰æ­¥éª¤ï¼š

## âœ… éƒ¨ç½²å‰æ£€æŸ¥

### 1. ä»£ç å‡†å¤‡
- [ ] å·²æ·»åŠ  `engines` å­—æ®µåˆ° package.json
- [ ] å·²åˆ›å»º .gitignore æ–‡ä»¶
- [ ] å·²åˆ›å»º render.yaml é…ç½®æ–‡ä»¶
- [ ] æœ¬åœ°æµ‹è¯•é€šè¿‡ï¼ˆnpm start èƒ½æ­£å¸¸è¿è¡Œï¼‰

### 2. æ•°æ®åº“å‡†å¤‡
é€‰æ‹©ä¸€ä¸ªæ•°æ®åº“æ–¹æ¡ˆå¹¶å®Œæˆé…ç½®ï¼š

#### æ–¹æ¡ˆ A: PlanetScaleï¼ˆæ¨èï¼‰
- [ ] å·²æ³¨å†Œ PlanetScale è´¦å·
- [ ] å·²åˆ›å»ºæ•°æ®åº“
- [ ] å·²è·å–è¿æ¥ä¿¡æ¯ï¼ˆHost, Username, Passwordï¼‰
- [ ] å·²æ‰§è¡Œ database/init.sql åˆå§‹åŒ–è¡¨ç»“æ„

#### æ–¹æ¡ˆ B: Railway MySQL
- [ ] å·²æ³¨å†Œ Railway è´¦å·
- [ ] å·²åˆ›å»º MySQL æ•°æ®åº“
- [ ] å·²è·å–è¿æ¥ä¿¡æ¯
- [ ] å·²æ‰§è¡Œ database/init.sql åˆå§‹åŒ–è¡¨ç»“æ„

#### æ–¹æ¡ˆ C: å…¶ä»–äº‘æ•°æ®åº“
- [ ] å·²å‡†å¤‡å¥½æ•°æ®åº“
- [ ] å·²è·å–è¿æ¥ä¿¡æ¯
- [ ] å·²æ‰§è¡Œæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬

### 3. Git ä»“åº“å‡†å¤‡
- [ ] å·²åˆå§‹åŒ– Git ä»“åº“ï¼ˆgit initï¼‰
- [ ] å·²æäº¤æ‰€æœ‰ä»£ç ï¼ˆgit add . && git commitï¼‰
- [ ] å·²åœ¨ GitHub åˆ›å»ºè¿œç¨‹ä»“åº“
- [ ] å·²æ¨é€åˆ° GitHubï¼ˆgit pushï¼‰

### 4. Render è´¦å·
- [ ] å·²æ³¨å†Œ Render è´¦å·
- [ ] å·²è¿æ¥ GitHub è´¦å·

## ğŸ“ éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤ 1: åˆ›å»º Git ä»“åº“

```bash
# è¿›å…¥åç«¯ç›®å½•
cd d:\Users\agger\Desktop\creat\selfIndex\backend

# åˆå§‹åŒ– Git
git init

# æ·»åŠ æ‰€æœ‰æ–‡ä»¶
git add .

# æäº¤
git commit -m "Initial commit: Daily Records Backend"

# æ·»åŠ è¿œç¨‹ä»“åº“ï¼ˆæ›¿æ¢ä¸ºæ‚¨çš„ä»“åº“åœ°å€ï¼‰
git remote add origin https://github.com/YOUR_USERNAME/daily-records-backend.git

# æ¨é€åˆ° GitHub
git branch -M main
git push -u origin main
```

### æ­¥éª¤ 2: é…ç½®æ•°æ®åº“

#### ä½¿ç”¨ PlanetScale

1. è®¿é—® https://planetscale.com
2. æ³¨å†Œ/ç™»å½•è´¦å·
3. ç‚¹å‡» "Create database"
4. æ•°æ®åº“åç§°ï¼š`daily_records`
5. åŒºåŸŸé€‰æ‹©ï¼š`AWS ap-southeast-1` (æ–°åŠ å¡) æˆ–å°±è¿‘åŒºåŸŸ
6. ç‚¹å‡» "Create database"
7. ç­‰å¾…æ•°æ®åº“åˆ›å»ºå®Œæˆ
8. ç‚¹å‡» "Connect" æŒ‰é’®
9. é€‰æ‹© "Node.js" è¿æ¥æ–¹å¼
10. å¤åˆ¶è¿æ¥ä¿¡æ¯ï¼š
    ```
    Host: aws.connect.psdb.cloud
    Username: xxxxxxxxxxxx
    Password: pscale_pw_xxxxxxxxxxxx
    Database: daily_records
    ```

11. æ‰§è¡Œæ•°æ®åº“åˆå§‹åŒ–ï¼š
    - ç‚¹å‡» "Console" æ ‡ç­¾
    - æˆ–ä½¿ç”¨æœ¬åœ° MySQL å®¢æˆ·ç«¯è¿æ¥
    - æ‰§è¡Œ `database/init.sql` ä¸­çš„ SQL è¯­å¥

### æ­¥éª¤ 3: åœ¨ Render åˆ›å»ºæœåŠ¡

1. è®¿é—® https://render.com
2. ä½¿ç”¨ GitHub ç™»å½•
3. ç‚¹å‡» "New +" â†’ "Web Service"
4. é€‰æ‹©æ‚¨çš„ GitHub ä»“åº“ `daily-records-backend`
5. å¡«å†™é…ç½®ï¼š
   - **Name**: `daily-records-api`
   - **Region**: `Singapore` (äºšæ´²ç”¨æˆ·) æˆ– `Oregon` (å…¶ä»–)
   - **Branch**: `main`
   - **Environment**: `Node`
   - **Build Command**: `npm install`
   - **Start Command**: `npm start`
   - **Plan**: `Free`

6. ç‚¹å‡» "Advanced"ï¼Œæ·»åŠ ç¯å¢ƒå˜é‡ï¼š

| Key | Value | è¯´æ˜ |
|-----|-------|------|
| `NODE_ENV` | `production` | ç¯å¢ƒ |
| `PORT` | `10000` | ç«¯å£ |
| `DB_HOST` | `ä» PlanetScale å¤åˆ¶` | æ•°æ®åº“åœ°å€ |
| `DB_PORT` | `3306` | ç«¯å£ |
| `DB_USER` | `ä» PlanetScale å¤åˆ¶` | ç”¨æˆ·å |
| `DB_PASSWORD` | `ä» PlanetScale å¤åˆ¶` | å¯†ç  |
| `DB_NAME` | `daily_records` | æ•°æ®åº“å |
| `UPLOAD_DIR` | `/tmp/uploads` | ä¸Šä¼ ç›®å½• |
| `MAX_FILE_SIZE` | `52428800` | æœ€å¤§æ–‡ä»¶å¤§å° |

7. ç‚¹å‡» "Create Web Service"

8. ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆ3-5åˆ†é’Ÿï¼‰

### æ­¥éª¤ 4: æµ‹è¯•éƒ¨ç½²

éƒ¨ç½²å®Œæˆåï¼Œæ‚¨ä¼šå¾—åˆ°ä¸€ä¸ª URLï¼Œä¾‹å¦‚ï¼š
```
https://daily-records-api.onrender.com
```

æµ‹è¯• APIï¼š

```bash
# Windows PowerShell
curl https://daily-records-api.onrender.com/api/health

# æˆ–ä½¿ç”¨æµè§ˆå™¨ç›´æ¥è®¿é—®
```

é¢„æœŸè¿”å›ï¼š
```json
{
  "code": 200,
  "message": "æœåŠ¡è¿è¡Œæ­£å¸¸",
  "data": {
    "status": "ok",
    "timestamp": "2025-12-05T03:30:00.000Z"
  }
}
```

æµ‹è¯•è®°å½•æ¥å£ï¼š
```bash
curl https://daily-records-api.onrender.com/api/records
```

## ğŸ”§ éƒ¨ç½²åé…ç½®

### æ›´æ–°å‰ç«¯ API åœ°å€

ä¿®æ”¹å‰ç«¯é…ç½®æ–‡ä»¶ï¼š

**æ–‡ä»¶ï¼š`frontend/src/utils/request.js`**

```javascript
const request = axios.create({
  baseURL: 'https://daily-records-api.onrender.com/api',  // æ”¹ä¸ºæ‚¨çš„ Render URL
  timeout: 10000
});
```

### é…ç½®é˜²æ­¢ä¼‘çœ ï¼ˆå¯é€‰ï¼‰

Render å…è´¹ç‰ˆ 15 åˆ†é’Ÿæ— è®¿é—®ä¼šä¼‘çœ ã€‚

ä½¿ç”¨ UptimeRobot æˆ– cron-job.org å®šæœŸè®¿é—®ï¼š
```
https://daily-records-api.onrender.com/api/health
```

è®¾ç½®æ¯ 5 åˆ†é’Ÿè®¿é—®ä¸€æ¬¡ã€‚

## âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

### æ–‡ä»¶ä¸Šä¼ é™åˆ¶

âš ï¸ Render çš„æ–‡ä»¶ç³»ç»Ÿæ˜¯ä¸´æ—¶çš„ï¼Œæ¯æ¬¡éƒ¨ç½²æˆ–é‡å¯åä¸Šä¼ çš„æ–‡ä»¶ä¼šä¸¢å¤±ã€‚

**ä¸´æ—¶è§£å†³æ–¹æ¡ˆ**ï¼š
- æ–‡ä»¶å­˜å‚¨åœ¨ `/tmp/uploads`
- çŸ¥é“é‡å¯ä¼šä¸¢å¤±æ–‡ä»¶

**æ°¸ä¹…è§£å†³æ–¹æ¡ˆ**ï¼ˆåç»­å®æ–½ï¼‰ï¼š
- é›†æˆ Cloudinaryï¼ˆå›¾ç‰‡/è§†é¢‘æ‰˜ç®¡ï¼‰
- æˆ–ä½¿ç”¨é˜¿é‡Œäº‘ OSS / è…¾è®¯äº‘ COS

### è‡ªåŠ¨ä¼‘çœ 

å…è´¹ç‰ˆæœåŠ¡ 15 åˆ†é’Ÿæ— è®¿é—®ä¼šä¼‘çœ ï¼Œä¸‹æ¬¡è®¿é—®éœ€è¦ 30-60 ç§’å”¤é†’ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨ UptimeRobot å®šæœŸè®¿é—®
- æˆ–å‡çº§åˆ°ä»˜è´¹å¥—é¤ï¼ˆ$7/æœˆï¼‰

### æ•°æ®åº“è¿æ¥æ•°

PlanetScale å…è´¹ç‰ˆé™åˆ¶ï¼š
- 1000 æ¬¡/ç§’ è¯»å–
- 100 æ¬¡/ç§’ å†™å…¥
- 10 ä¸ªå¹¶å‘è¿æ¥

ç¡®ä¿è¿æ¥æ± é…ç½®åˆç†ï¼ˆå½“å‰è®¾ç½®ï¼š10 ä¸ªè¿æ¥ï¼‰

## ğŸ› é—®é¢˜æ’æŸ¥

### éƒ¨ç½²å¤±è´¥

æ£€æŸ¥ Render æ—¥å¿—ï¼š
1. è¿›å…¥æ‚¨çš„æœåŠ¡é¡µé¢
2. ç‚¹å‡» "Logs" æ ‡ç­¾
3. æŸ¥çœ‹é”™è¯¯ä¿¡æ¯

å¸¸è§é—®é¢˜ï¼š
- **Node version**: ç¡®ä¿ package.json ä¸­ engines å­—æ®µæ­£ç¡®
- **ä¾èµ–å®‰è£…å¤±è´¥**: æ£€æŸ¥ package.json æ˜¯å¦æ­£ç¡®
- **æ•°æ®åº“è¿æ¥å¤±è´¥**: æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦é…ç½®æ­£ç¡®

### æ•°æ®åº“è¿æ¥è¶…æ—¶

1. æ£€æŸ¥ PlanetScale æ•°æ®åº“çŠ¶æ€
2. ç¡®è®¤ç¯å¢ƒå˜é‡é…ç½®æ­£ç¡®
3. æ£€æŸ¥æ•°æ®åº“æ˜¯å¦å…è®¸å¤–éƒ¨è¿æ¥
4. æŸ¥çœ‹ Render æ—¥å¿—ä¸­çš„å…·ä½“é”™è¯¯

### API è¿”å› 404

1. ç¡®è®¤ URL è·¯å¾„æ­£ç¡®
2. æ£€æŸ¥è·¯ç”±é…ç½®
3. æŸ¥çœ‹ Render æ—¥å¿—

## ğŸ“Š ç›‘æ§å’Œç»´æŠ¤

### æŸ¥çœ‹æ—¥å¿—

Render Dashboard â†’ æ‚¨çš„æœåŠ¡ â†’ Logs

### æŸ¥çœ‹æ€§èƒ½æŒ‡æ ‡

Render Dashboard â†’ æ‚¨çš„æœåŠ¡ â†’ Metrics

### æ‰‹åŠ¨é‡å¯æœåŠ¡

Render Dashboard â†’ æ‚¨çš„æœåŠ¡ â†’ Manual Deploy â†’ "Deploy latest commit"

## ğŸ‰ éƒ¨ç½²æˆåŠŸï¼

å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œæ‚¨çš„åç«¯ API å°±æˆåŠŸéƒ¨ç½²åˆ° Render äº†ï¼

ä¸‹ä¸€æ­¥ï¼š
1. éƒ¨ç½²å‰ç«¯åˆ° Netlify
2. é…ç½®å‰ç«¯è¿æ¥åç«¯ API
3. æµ‹è¯•å®Œæ•´åŠŸèƒ½

---

éœ€è¦å¸®åŠ©ï¼Ÿ
- Render æ–‡æ¡£ï¼šhttps://render.com/docs
- PlanetScale æ–‡æ¡£ï¼šhttps://planetscale.com/docs
- æœ¬é¡¹ç›® Issueï¼šhttps://github.com/YOUR_USERNAME/daily-records-backend/issues
